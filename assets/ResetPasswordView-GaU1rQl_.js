import{d as k,aD as d,P as x,C as l,c as p,a as r,e as R,u,t as V,al as m,am as v,an as f,av as _,m as b,o as w,aC as A,aA as C,_ as N}from"./index-BD5_7tqr.js";import{A as P}from"./index-DoiNv535.js";const T={class:"content"},U={key:0,class:"error-info"},B=k({__name:"ResetPasswordView",setup(D){const n=x(),c=b();var g=d+(d.endsWith("/")?"":"/")+"1.1/resetPassword/"+n.query.token,a=l(""),s=l(""),t=l("");function y(){if(a.value="",n.query.token){if(!s.value||!t.value){a.value="请填写密码。";return}if(s.value!==t.value){a.value="两次输入的密码不一致。";return}var i=new P;i.get(g,{params:{password:s.value}}).then(e=>{e.data&&JSON.parse(e.data).error?a.value="Token 无效或已过期。":(A(),C("重置密码成功。"),c.push({name:"Home"}))}).catch(e=>{a.value="连接服务器时失败。"})}else a.value="缺少 Token。"}return(i,e)=>(w(),p("div",T,[e[4]||(e[4]=r("h1",null,"重置密码",-1)),u(a)?(w(),p("p",U,V(u(a)),1)):R("",!0),r("form",{onSubmit:e[2]||(e[2]=_(o=>y(),["prevent"]))},[m(r("mdui-text-field",{type:"password","toggle-password":"",label:"密码","onUpdate:modelValue":e[0]||(e[0]=o=>f(s)?s.value=o:s=o)},null,512),[[v,u(s)]]),m(r("mdui-text-field",{type:"password","toggle-password":"",label:"确认密码","onUpdate:modelValue":e[1]||(e[1]=o=>f(t)?t.value=o:t=o)},null,512),[[v,u(t)]]),e[3]||(e[3]=r("mdui-button",{type:"submit"},"重置密码",-1))],32)]))}}),I=N(B,[["__scopeId","data-v-2ad8d4cc"]]);export{I as default};
