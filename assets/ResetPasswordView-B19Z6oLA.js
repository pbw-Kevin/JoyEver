import{d as k,aC as f,O as V,C as i,c as v,a as n,e as x,t as p,u,al as m,am as c,ak as w,au as T,m as y,o as _,ap as C,az as U,_ as h}from"./index-Bgua-Nis.js";const N={class:"content"},P={key:0,class:"error-info"},S=["disabled"],q=k({__name:"ResetPasswordView",setup(B){const d=V(),b=y();var R=f+(f.endsWith("/")?"":"/")+"1.1/resetPassword/"+d.query.token,e=i(""),s=i(""),t=i(""),o=i(!1);function g(){if(e.value="",o.value=!0,d.query.token){if(!s.value||!t.value){e.value="请填写密码。",o.value=!1;return}if(s.value!==t.value){e.value="两次输入的密码不一致。",o.value=!1;return}var a=new XMLHttpRequest;a.open("GET",R+"?password="+encodeURIComponent(s.value),!0),a.onreadystatechange=()=>{a.readyState===4&&(a.status===200?(C(),U("重置密码成功。"),b.push({name:"Home"})):JSON.parse(a.responseText).error?e.value="Token 无效或已过期。":(e.value="连接服务器时失败。",o.value=!1))},a.send()}else e.value="缺少 Token。",o.value=!1}return(a,r)=>(_(),v("div",N,[n("h1",null,p(a.$t("account.operation.resetPassword")),1),u(e)?(_(),v("p",P,p(u(e)),1)):x("",!0),n("form",{onSubmit:r[2]||(r[2]=T(l=>g(),["prevent"]))},[m(n("mdui-text-field",{type:"password","toggle-password":"",label:"密码","onUpdate:modelValue":r[0]||(r[0]=l=>w(s)?s.value=l:s=l)},null,512),[[c,u(s)]]),m(n("mdui-text-field",{type:"password","toggle-password":"",label:"确认密码","onUpdate:modelValue":r[1]||(r[1]=l=>w(t)?t.value=l:t=l)},null,512),[[c,u(t)]]),n("mdui-button",{type:"submit",disabled:u(o)},"重置密码",8,S)],32)]))}}),I=h(q,[["__scopeId","data-v-4f24a370"]]);export{I as default};
