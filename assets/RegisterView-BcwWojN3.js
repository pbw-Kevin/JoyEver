import{d as y,C as d,ai as A,c as w,a as l,e as N,u as o,t as m,al as p,am as v,an as f,av as R,b as x,f as U,w as k,R as q,m as C,o as V,ax as B,aq as E,ao as I,aA as T,ap as j,K as b,az as D,_ as F}from"./index-CuP_hlbb.js";const M={class:"content"},O={key:0,class:"error-info"},S={slot:"helper",class:"error-info"},h={slot:"helper",class:"error-info"},z={slot:"helper",class:"error-info"},H={slot:"helper",class:"error-info"},K=y({__name:"RegisterView",setup(L){var _=C(),i=d(""),t=d(""),n=d(""),u=d(""),g={general:"",username:"",password:"",passwordAgain:"",email:""},e=d(g);function c(){e.value={...g},i.value?B(i.value)||(e.value.username="用户名格式不正确。用户名的长度应在 5 到 16 个字符之间，且只能包含字母、数字和下划线，其中第一个字符必须是字母。"):e.value.username="用户名不能为空。",t.value?E(t.value)||(e.value.password="密码格式不正确。密码的长度应至少为 8个字符，且不为空白字符。"):e.value.password="密码不能为空。",t.value!==n.value&&(e.value.passwordAgain="两次输入的密码不一致。"),u.value&&!I(u.value)&&(e.value.email="邮箱格式不正确。"),!Object.values(e.value).some(r=>r)&&T(i.value,t.value,n.value,u.value).then(r=>{r&&(r.code==0?(j("注册成功！"),b().get("email")&&!b().get("emailVerified")&&D("尚未验证邮箱。验证邮箱以获得更安全的账号体验。转到“账号设置”以验证。"),_.push({name:"Home"})):r.code==202?e.value.username="用户名已被注册。":r.code==203?e.value.email="邮箱已被注册。":r.code==15?e.value.general="注册完成，但是在创建账号相关的必要 Objects 时发生错误。现在可以正常登录并使用，但可能会有潜在的一些功能性问题。如必要，请联系管理员以获取帮助。":e.value.general=`注册失败，错误代码：${r.code}。错误信息： ${r.message}。如必要，请联系管理员以获取帮助。`)})}return A([i,t,n,u],()=>{e.value={...g}},{immediate:!0}),(r,a)=>(V(),w("div",M,[a[8]||(a[8]=l("h1",null,"注册新用户",-1)),o(e).general?(V(),w("p",O,m(o(e).general),1)):N("",!0),l("form",{onSubmit:a[4]||(a[4]=R(s=>c(),["prevent"]))},[p(l("mdui-text-field",{label:"用户名",maxlength:"16",required:"","onUpdate:modelValue":a[0]||(a[0]=s=>f(i)?i.value=s:i=s)},[l("span",S,m(o(e).username),1)],512),[[v,o(i)]]),p(l("mdui-text-field",{type:"password","toggle-password":"",label:"密码",required:"","onUpdate:modelValue":a[1]||(a[1]=s=>f(t)?t.value=s:t=s)},[l("span",h,m(o(e).password),1)],512),[[v,o(t)]]),p(l("mdui-text-field",{type:"password","toggle-password":"",label:"确认密码",required:"","onUpdate:modelValue":a[2]||(a[2]=s=>f(n)?n.value=s:n=s)},[l("span",z,m(o(e).passwordAgain),1)],512),[[v,o(n)]]),p(l("mdui-text-field",{type:"email",label:"邮箱（可选）","onUpdate:modelValue":a[3]||(a[3]=s=>f(u)?u.value=s:u=s)},[l("span",H,m(o(e).email),1)],512),[[v,o(u)]]),a[5]||(a[5]=l("mdui-button",{type:"submit"},"注册",-1))],32),l("div",null,[a[7]||(a[7]=x("已有账号？")),U(o(q),{to:"/login"},{default:k(()=>a[6]||(a[6]=[x("登录")])),_:1,__:[6]})])]))}}),G=F(K,[["__scopeId","data-v-166cca94"]]);export{G as default};
