import{d as y,P as N,Q as _,K as v,C as i,N as x,S as A,T as f,c as d,a as s,f as p,u as t,b as C,t as g,e as o,v as R,w as V,r as L,o as r,_ as w}from"./index-BD5_7tqr.js";import{_ as B}from"./UserAvatar.vue_vue_type_script_setup_true_lang-DgxfcaPt.js";import{_ as I}from"./UserTagPack.vue_vue_type_script_setup_true_lang-DYpXGMG4.js";import"./UserTag.vue_vue_type_style_index_0_lang-DFozZDUI.js";const S={class:"content"},T={class:"user-head"},U={class:"user-head-info"},M={class:"user-head-nickname"},P={class:"user-head-username"},Q={class:"user-info"},$=["value"],j={key:1,disabled:""},q=y({__name:"AccountView",setup(D){var h=N(),a=h.params.id,k=_()&&v().get("username")==a,b=_()&&v().get("username")!=a,u=i({objectId:"",nickname:"",username:"",createdAt:"",updatedAt:""}),l=i(""),c=i([]);return x(!0,a).then(m=>{u.value=m.toJSON(),A(!0,a).then(e=>{var n;(n=e.getACL())!=null&&n.getPublicReadAccess()&&(l.value=e.get("email"))}),f.equalTo("username",a),f.find().then(e=>{e.length==1&&(c.value=e[0].get("roles"))})}),(m,e)=>{const n=L("RouterLink");return r(),d("div",S,[e[4]||(e[4]=s("h1",null,"账号",-1)),s("div",T,[p(B,{class:"user-avatar",url:t(u).avatarURL},null,8,["url"]),s("div",U,[s("span",M,[C(g(t(u).nickname)+" ",1),p(I,{roles:t(c)},null,8,["roles"])]),e[0]||(e[0]=s("br",null,null,-1)),s("span",P,g(t(a)),1)])]),s("div",Q,[t(l)?(r(),d("mdui-text-field",{key:0,class:"user-email",variant:"outlined",readonly:"",label:"邮箱",value:t(l)},null,8,$)):o("",!0),e[3]||(e[3]=s("br",null,null,-1)),t(b)?(r(),d("mdui-button",j,"添加好友")):o("",!0),t(k)?(r(),R(n,{key:2,to:"/myaccount"},{default:V(()=>e[1]||(e[1]=[s("mdui-button",null,"个人视角",-1)])),_:1,__:[1]})):o("",!0),o("",!0)])])}}}),z=w(q,[["__scopeId","data-v-986e3087"]]);export{z as default};
