import{d as _,C as d,Y as U,c as y,a as o,T as m,U as p,u as t,V as f,t as v,W as R,b as w,f as A,w as N,R as T,m as k,o as q,Z as B,a0 as C,$ as E,a4 as I,a2 as D,K as x,a3 as F,_ as M}from"./index-DRZwfABo.js";const S={class:"content"},c={slot:"helper",class:"error-info"},j={slot:"helper",class:"error-info"},H={slot:"helper",class:"error-info"},K={slot:"helper",class:"error-info"},L=_({__name:"RegisterView",setup(O){var V=k(),r=d(""),l=d(""),n=d(""),i=d(""),g={username:"",password:"",passwordAgain:"",email:""},a=d(g);function b(){a.value={...g},r.value?B(r.value)||(a.value.username="用户名格式不正确。用户名的长度应在 5 到 16 个字符之间，且只能包含字母、数字和下划线，其中第一个字符必须是字母。"):a.value.username="用户名不能为空。",l.value?C(l.value)||(a.value.password="密码格式不正确。密码的长度应至少为 8个字符，且不为空白字符。"):a.value.password="密码不能为空。",l.value!==n.value&&(a.value.passwordAgain="两次输入的密码不一致。"),i.value&&!E(i.value)&&(a.value.email="邮箱格式不正确。"),!Object.values(a.value).some(u=>u)&&I(r.value,l.value,n.value,i.value).then(u=>{u&&(u.code==0?(D("注册成功！"),x().get("email")&&!x().get("emailVerified")&&F("尚未验证邮箱。验证邮箱以获得更安全的账号体验。转到“账号设置”以验证。"),V.push({name:"Home"})):u.code==202?a.value.username="用户名已被注册。":u.code==203?a.value.email="邮箱已被注册。":console.log(u))})}return U([r,l,n,i],()=>{a.value={...g}},{immediate:!0}),(u,e)=>(q(),y("div",S,[e[8]||(e[8]=o("h1",null,"注册新用户",-1)),o("form",{onSubmit:e[4]||(e[4]=R(s=>b(),["prevent"]))},[m(o("mdui-text-field",{label:"用户名",maxlength:"16",required:"","onUpdate:modelValue":e[0]||(e[0]=s=>f(r)?r.value=s:r=s)},[o("span",c,v(t(a).username),1)],512),[[p,t(r)]]),m(o("mdui-text-field",{type:"password","toggle-password":"",label:"密码",required:"","onUpdate:modelValue":e[1]||(e[1]=s=>f(l)?l.value=s:l=s)},[o("span",j,v(t(a).password),1)],512),[[p,t(l)]]),m(o("mdui-text-field",{type:"password","toggle-password":"",label:"确认密码",required:"","onUpdate:modelValue":e[2]||(e[2]=s=>f(n)?n.value=s:n=s)},[o("span",H,v(t(a).passwordAgain),1)],512),[[p,t(n)]]),m(o("mdui-text-field",{type:"email",label:"邮箱（可选）","onUpdate:modelValue":e[3]||(e[3]=s=>f(i)?i.value=s:i=s)},[o("span",K,v(t(a).email),1)],512),[[p,t(i)]]),e[5]||(e[5]=o("mdui-button",{type:"submit"},"注册",-1))],32),o("div",null,[e[7]||(e[7]=w("已有账号？")),A(t(T),{to:"/login"},{default:N(()=>e[6]||(e[6]=[w("登录")])),_:1,__:[6]})])]))}}),W=M(L,[["__scopeId","data-v-1a5e7fe3"]]);export{W as default};
