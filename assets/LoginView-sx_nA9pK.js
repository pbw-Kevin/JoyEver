import{d as N,C as d,Y as U,c as y,a as t,T as m,U as f,u as i,V as p,t as v,W as R,b as u,f as w,w as g,R as V,m as T,o as k,Z as B,$ as C,a0 as E,a1 as I,a2 as L,K as b,a3 as q,_ as D}from"./index-obtZFu2k.js";const F={class:"content"},M={slot:"helper",class:"error-info"},S={slot:"helper",class:"error-info"},j=N({__name:"LoginView",setup(A){var x=T(),a=d(""),r=d(""),n={username:"",password:""},s=d(n);function _(){s.value={...n},a.value?!B(a.value)&&!C(a.value)&&(s.value.username="不是有效的用户名或邮箱。用户名的长度应在 5 到 16 个字符之间，且只能包含字母、数字和下划线，其中第一个字符必须是字母。"):s.value.username="用户名（邮箱）不能为空。",r.value?E(r.value)||(s.value.password="密码格式不正确。密码的长度应至少为 8 个字符，且不为空白字符。"):s.value.password="密码不能为空。",!Object.values(s.value).some(o=>o)&&I(a.value,r.value).then(o=>{o&&(o.code?o.code==205?s.value.username="找不到邮箱对应的用户。":o.code==210?s.value.password="用户名和密码不匹配。":o.code==211?s.value.username="找不到用户。":console.log(o):(L("登录成功！"),b().get("email")&&!b().get("emailVerified")&&q("尚未验证邮箱。验证邮箱以获得更安全的账号体验。转到“账号设置”以验证。"),x.push({name:"Home"})))})}return U([a,r],()=>{s.value={...n}},{immediate:!0}),(o,e)=>(k(),y("div",F,[e[8]||(e[8]=t("h1",null,"登录",-1)),t("form",{onSubmit:e[2]||(e[2]=R(l=>_(),["prevent"]))},[m(t("mdui-text-field",{label:"用户名（邮箱）",required:"","onUpdate:modelValue":e[0]||(e[0]=l=>p(a)?a.value=l:a=l)},[t("span",M,v(i(s).username),1)],512),[[f,i(a)]]),m(t("mdui-text-field",{label:"密码",type:"password","toggle-password":"",required:"","onUpdate:modelValue":e[1]||(e[1]=l=>p(r)?r.value=l:r=l)},[t("span",S,v(i(s).password),1)],512),[[f,i(r)]]),e[3]||(e[3]=t("mdui-button",{type:"submit"},"登录",-1))],32),t("div",null,[e[5]||(e[5]=u("还没有账号？")),w(i(V),{to:"/register"},{default:g(()=>e[4]||(e[4]=[u("注册")])),_:1,__:[4]})]),t("div",null,[e[7]||(e[7]=u("忘记密码？")),w(i(V),{to:"/resetpassword"},{default:g(()=>e[6]||(e[6]=[u("重置密码")])),_:1,__:[6]})])]))}}),K=D(j,[["__scopeId","data-v-97db0c7c"]]);export{K as default};
