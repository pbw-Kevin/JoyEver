import{d as I,y as w,K as N,S as p,C as o,N as B,Q as S,c as i,a as t,T as y,e as m,u as l,U as E,V as k,b as T,o as n,_}from"./index-DRZwfABo.js";const j={class:"content"},q=["value"],A={key:0},L=["checked"],O={key:0},P={key:1},R=["disabled"],D={key:3},F={key:4},K=I({__name:"SettingView",setup(M){w();var v=N(),U=v.get("username"),b=new p.Object("UserInfo"),u=o(""),a=o(v.get("email")),g=new p.Object("Email"),r=o(!1),V=o(v.get("emailVerified")),f=o(!1),x=o(!1);B().then(d=>{b=d,u.value=b.get("nickname")}),S().then(d=>{g=d,r.value=g.getACL().getPublicReadAccess()});function C(){p.User.requestEmailVerify(a.value).then(()=>{f.value=!0}).catch(d=>{x.value=!0})}return(d,e)=>(n(),i("div",j,[e[5]||(e[5]=t("h1",null,"设置",-1)),e[6]||(e[6]=t("mdui-button",null,"保存设置",-1)),e[7]||(e[7]=t("h2",null,"全局设置",-1)),t("mdui-text-field",{label:"用户名",variant:"outlined",readonly:"",value:l(U)},null,8,q),y(t("mdui-text-field",{label:"昵称","onUpdate:modelValue":e[0]||(e[0]=s=>k(u)?u.value=s:u=s)},null,512),[[E,l(u)]]),l(a)?(n(),i("div",A,[y(t("mdui-text-field",{label:"邮箱","onUpdate:modelValue":e[1]||(e[1]=s=>k(a)?a.value=s:a=s)},null,512),[[E,l(a)]]),t("mdui-checkbox",{checked:l(r),onInput:e[2]||(e[2]=s=>k(r)?r.value=s.target.value:r=s.target.value)},"公开邮箱",40,L),e[4]||(e[4]=T(" 邮箱状态：")),l(V)?(n(),i("span",O,"已验证✔")):(n(),i("span",P,"未验证❌")),l(V)?m("",!0):(n(),i("mdui-button",{key:2,onClick:e[3]||(e[3]=s=>C()),disabled:l(f)},"邮箱验证",8,R)),l(f)?(n(),i("span",D,"验证邮件已发送")):m("",!0),l(x)?(n(),i("span",F,"发送验证邮件失败")):m("",!0)])):m("",!0),e[8]||(e[8]=t("h2",null,"游戏设置",-1)),e[9]||(e[9]=t("mdui-checkbox",null,"自动禁用不可用手势",-1)),e[10]||(e[10]=t("h3",null,"自定义手势",-1)),e[11]||(e[11]=t("h2",null,"外观",-1)),e[12]||(e[12]=t("h3",null,"主题",-1)),e[13]||(e[13]=t("mdui-button",null,"保存设置",-1))]))}}),z=_(K,[["__scopeId","data-v-19665241"]]);export{z as default};
