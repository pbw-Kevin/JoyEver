import"./arrow-back-D39iMvmT.js";import{d as $,m as L,c as a,o as e,a as t,e as m,b,f as w,t as f,n as v,u as o,x as N,_ as A,C as P,D as g,z as V,G as y,E as B,A as S,v as p,l as _,w as h,r as z,F as u,q as l,H as c}from"./index-DrOyULMF.js";import{M as D,c as I}from"./height-CKhsmAYJ.js";import{_ as M}from"./UserTag.vue_vue_type_style_index_0_lang-tsKl-qko.js";import"./UserAvatar.vue_vue_type_script_setup_true_lang-DrA22W1_.js";const R={class:"announcement-piece"},T={class:"announcement-box"},E={class:"announcement-head"},F={class:"announcement-nickname"},G={key:0,class:"announcement-time"},H={class:"announcement-card"},q=["href"],U=$({__name:"AnnouncementPiece",props:{time:{},href:{},routePath:{}},setup(k){const s=k;var x=L();return(r,i)=>(e(),a("div",R,[i[2]||(i[2]=t("mdui-icon-announcement",{class:"avatar"},null,-1)),t("div",T,[t("div",E,[t("div",F,[i[1]||(i[1]=b(" 公告 ")),w(M,{tag:"官方公告",color:"green"})]),s.time?(e(),a("div",G,f(s.time),1)):m("",!0)]),t("div",H,[t("mdui-card",{onClick:i[0]||(i[0]=n=>s.routePath?o(x).push(s.routePath):void 0),style:v({cursor:s.routePath?"pointer":""}),href:s.href},[N(r.$slots,"default",{},void 0,!0)],12,q)])])]))}}),C=A(U,[["__scopeId","data-v-a4cf12c2"]]),W={class:"content"},j={class:"chat-box"},J={"scroll-target":".chat-box"},K={class:"chat-announcement-container"},O={key:0,class:"new-announcement"},Q={key:1,class:"no-announcement"},X=$({__name:"AnnouncementView",setup(k){var s=P(g.value);return V(()=>{s.value=g.value,setTimeout(y,0,".chat-announcement-container"),B(!0)}),S(()=>y(".chat-announcement-container")),(x,r)=>{const i=z("RouterLink");return e(),a("div",W,[r[3]||(r[3]=t("h1",null,"站内消息",-1)),t("div",{class:"chat-container",style:v({height:o(I)+"px"})},[o(_)?(e(),p(D,{key:0,style:v({width:o(_)?"250px":"100%",minWidth:o(_)?"250px":"100%"})},null,8,["style"])):m("",!0),t("div",j,[t("mdui-top-app-bar",J,[w(i,{to:"/message"},{default:h(()=>r[0]||(r[0]=[t("mdui-button-icon",null,[t("mdui-icon-arrow-back")],-1)])),_:1,__:[0]}),r[1]||(r[1]=t("mdui-top-app-bar-title",null," 公告 ",-1))]),t("div",K,[(e(!0),a(u,null,l(o(c).filter(n=>n.time<o(s)),n=>(e(),p(C,{time:n.time.toLocaleString("zh-CN")},{default:h(()=>[(e(!0),a(u,null,l(n.text.split(`
`),d=>(e(),a("p",null,f(d),1))),256))]),_:2},1032,["time"]))),256)),o(c).filter(n=>n.time>o(s)).length>0?(e(),a("div",O,r[2]||(r[2]=[b(" 新公告 "),t("mdui-icon-keyboard-arrow-down",null,null,-1)]))):m("",!0),(e(!0),a(u,null,l(o(c).filter(n=>n.time>o(s)),n=>(e(),p(C,{time:n.time.toLocaleString("zh-CN")},{default:h(()=>[(e(!0),a(u,null,l(n.text.split(`
`),d=>(e(),a("p",null,f(d),1))),256))]),_:2},1032,["time"]))),256)),o(c).length==0?(e(),a("p",Q,"暂无公告")):m("",!0)])])],4)])}}}),ot=A(X,[["__scopeId","data-v-4939e013"]]);export{ot as default};
