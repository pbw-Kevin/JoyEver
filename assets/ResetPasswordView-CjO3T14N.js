import{d as b,aA as d,O as c,C as l,c as p,a as r,e as R,u,t as V,aj as m,ak as f,al as v,ar as _,m as g,o as w,az as A,ax as N,_ as T}from"./index--KQafXfn.js";import{A as U}from"./index-DoiNv535.js";const B={class:"content"},C={key:0,class:"error-info"},P=b({__name:"ResetPasswordView",setup(S){const n=c(),k=g();var x=d+(d.endsWith("/")?"":"/")+"1.1/resetPassword/"+n.query.token,a=l(""),s=l(""),t=l("");function y(){if(a.value="",n.query.token){if(!s.value||!t.value){a.value="请填写密码。";return}if(s.value!==t.value){a.value="两次输入的密码不一致。";return}var i=new U;i.get(x,{params:{password:s.value}}).then(e=>{e.data&&JSON.parse(e.data).error?a.value="Token 无效或已过期。":(A(),N("重置密码成功。"),k.push({name:"Home"}))}).catch(e=>{a.value="连接服务器时失败。"})}else a.value="缺少 Token。"}return(i,e)=>(w(),p("div",B,[e[4]||(e[4]=r("h1",null,"重置密码",-1)),u(a)?(w(),p("p",C,V(u(a)),1)):R("",!0),r("form",{onSubmit:e[2]||(e[2]=_(o=>y(),["prevent"]))},[m(r("mdui-text-field",{type:"password",label:"密码","onUpdate:modelValue":e[0]||(e[0]=o=>v(s)?s.value=o:s=o)},null,512),[[f,u(s)]]),m(r("mdui-text-field",{type:"password",label:"确认密码","onUpdate:modelValue":e[1]||(e[1]=o=>v(t)?t.value=o:t=o)},null,512),[[f,u(t)]]),e[3]||(e[3]=r("mdui-button",{type:"submit"},"重置密码",-1))],32)]))}}),I=T(P,[["__scopeId","data-v-19b5c893"]]);export{I as default};
