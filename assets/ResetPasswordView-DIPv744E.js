import{d as b,aE as d,P as k,C as l,c as p,a as r,e as x,u,t as R,al as m,am as f,an as v,av as V,m as _,o as w,aD as B,aB as N,_ as P}from"./index-BiTin0vQ.js";import{A as T}from"./index-DoiNv535.js";const U={class:"content"},A={key:0,class:"error-info"},C=b({__name:"ResetPasswordView",setup(D){const n=k(),c=_();var g=d+(d.endsWith("/")?"":"/")+"1.1/resetPassword/"+n.query.token,a=l(""),s=l(""),t=l("");function y(){if(a.value="",n.query.token){if(!s.value||!t.value){a.value="请填写密码。";return}if(s.value!==t.value){a.value="两次输入的密码不一致。";return}var i=new T;i.get(g,{params:{password:s.value}}).then(e=>{e.data&&JSON.parse(e.data).error?a.value="Token 无效或已过期。":(B(),N("重置密码成功。"),c.push({name:"Home"}))}).catch(e=>{a.value="连接服务器时失败。"})}else a.value="缺少 Token。"}return(i,e)=>(w(),p("div",U,[e[4]||(e[4]=r("h1",null,"重置密码",-1)),u(a)?(w(),p("p",A,R(u(a)),1)):x("",!0),r("form",{onSubmit:e[2]||(e[2]=V(o=>y(),["prevent"]))},[m(r("mdui-text-field",{type:"password","toggle-password":"",label:"密码","onUpdate:modelValue":e[0]||(e[0]=o=>v(s)?s.value=o:s=o)},null,512),[[f,u(s)]]),m(r("mdui-text-field",{type:"password","toggle-password":"",label:"确认密码","onUpdate:modelValue":e[1]||(e[1]=o=>v(t)?t.value=o:t=o)},null,512),[[f,u(t)]]),e[3]||(e[3]=r("mdui-button",{type:"submit"},"重置密码",-1))],32)]))}}),E=P(C,[["__scopeId","data-v-07cf31cb"]]);export{E as default};
