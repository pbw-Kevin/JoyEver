import{d as N,C as m,ak as R,c as w,a as l,e as U,t as d,u as r,am as p,an as v,al as f,au as k,b as c,f as A,w as B,R as C,m as h,o as x,ax as q,ao as V,ap as E,aB as I,S,K as b,az as T,_ as D}from"./index-oBlj-0q0.js";const F={class:"content"},M={key:0,class:"error-info"},j={slot:"helper",class:"error-info"},z={slot:"helper",class:"error-info"},H={slot:"helper",class:"error-info"},K={slot:"helper",class:"error-info"},L=N({__name:"RegisterView",setup(O){var _=h(),t=m(""),i=m(""),n=m(""),u=m(""),g={general:"",username:"",password:"",passwordAgain:"",email:""},e=m(g);function y(){e.value={...g},t.value?q(t.value)?V(t.value)&&(e.value.username="用户名格式不正确。用户名不应具有邮箱的格式。"):e.value.username="用户名格式不正确。用户名的长度应在 2 到 16 个字符之间，且只能包含字母、数字和下划线，其中第一个字符必须是字母。":e.value.username="用户名不能为空。",i.value?E(i.value)||(e.value.password="密码格式不正确。密码的长度应至少为 8 个字符，且不为空白字符。"):e.value.password="密码不能为空。",i.value!==n.value&&(e.value.passwordAgain="两次输入的密码不一致。"),u.value&&!V(u.value)&&(e.value.email="邮箱格式不正确。"),!Object.values(e.value).some(o=>o)&&I(t.value,i.value,n.value,u.value).then(o=>{o&&(o.code==0?(S("注册成功！"),b().get("email")&&!b().get("emailVerified")&&T("尚未验证邮箱。验证邮箱以获得更安全的账号体验。转到“账号设置”以验证。"),_.push({name:"Home"})):o.code==202?e.value.username="用户名已被注册。":o.code==203?e.value.email="邮箱已被注册。":o.code==15?e.value.general="注册完成，但是在创建账号相关的必要对象时发生错误。现在可以正常登录并使用，但可能会有潜在的一些功能性问题。如必要，请联系管理员以获取帮助。":e.value.general=`注册失败，错误代码：${o.code}。错误信息： ${o.message}。如必要，请联系管理员以获取帮助。`)})}return R([t,i,n,u],()=>{e.value={...g}},{immediate:!0}),(o,a)=>(x(),w("div",F,[l("h1",null,d(o.$t("account.operation.register")),1),r(e).general?(x(),w("p",M,d(r(e).general),1)):U("",!0),l("form",{onSubmit:a[4]||(a[4]=k(s=>y(),["prevent"]))},[p(l("mdui-text-field",{label:"用户名",maxlength:"16",required:"","onUpdate:modelValue":a[0]||(a[0]=s=>f(t)?t.value=s:t=s)},[l("span",j,d(r(e).username),1)],512),[[v,r(t)]]),p(l("mdui-text-field",{type:"password","toggle-password":"",label:"密码",required:"","onUpdate:modelValue":a[1]||(a[1]=s=>f(i)?i.value=s:i=s)},[l("span",z,d(r(e).password),1)],512),[[v,r(i)]]),p(l("mdui-text-field",{type:"password","toggle-password":"",label:"确认密码",required:"","onUpdate:modelValue":a[2]||(a[2]=s=>f(n)?n.value=s:n=s)},[l("span",H,d(r(e).passwordAgain),1)],512),[[v,r(n)]]),p(l("mdui-text-field",{type:"email",label:"邮箱（可选）","onUpdate:modelValue":a[3]||(a[3]=s=>f(u)?u.value=s:u=s)},[l("span",K,d(r(e).email),1)],512),[[v,r(u)]]),a[5]||(a[5]=l("mdui-button",{type:"submit"},"注册",-1))],32),l("div",null,[a[7]||(a[7]=c("已有账号？",-1)),A(r(C),{to:"/login"},{default:B(()=>[...a[6]||(a[6]=[c("登录",-1)])]),_:1})])]))}}),G=D(L,[["__scopeId","data-v-e2c4fad6"]]);export{G as default};
