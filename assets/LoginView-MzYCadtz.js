import{d as y,af as $,C as m,ak as k,c as g,a as t,e as N,t as n,u as r,am as p,an as f,al as v,au as P,b as c,f as w,w as _,R as h,m as A,o as b,ax as C,ao as F,ap as I,ay as R,S as B,K as E,az as L,aA as S,_ as T}from"./index-oBlj-0q0.js";const q={class:"content"},D={key:0,class:"error-info"},M=["label"],j={slot:"helper",class:"error-info"},x=["label"],z={slot:"helper",class:"error-info"},H={type:"submit"},K=y({__name:"LoginView",setup(O){const s=$().t;var U=A(),o=m(""),i=m(""),d={general:"",username:"",password:""},a=m(d);function V(){a.value={...d},o.value?!C(o.value)&&!F(o.value)&&(a.value.username=s("account.login.message.invalidUsernameEmail")):a.value.username=s("account.login.message.emptyUsernameEmail"),i.value?I(i.value)||(a.value.password=s("account.login.message.invalidPassword")):a.value.password=s("account.login.message.emptyPassword"),!Object.values(a.value).some(e=>e)&&R(o.value,i.value).then(e=>{e&&(e.code?e.code==205?a.value.username=s("account.login.message.cannotFindEmailUser"):e.code==210?a.value.password=s("account.login.message.mismatchUsernamePassword"):e.code==211?a.value.username=s("account.login.message.cannotFindUser"):a.value.general=s("account.login.message.unknownError",{code:e.code,message:e.message}):(B(s("account.login.message.success")),E().get("email")&&!E().get("emailVerified")&&L(s("account.login.message.unverifiedEmail")),S(!0),U.push({name:"Home"})))})}return k([o,i],()=>{a.value={...d}},{immediate:!0}),(e,l)=>(b(),g("div",q,[t("h1",null,n(e.$t("account.login.title")),1),r(a).general?(b(),g("p",D,n(r(a).general),1)):N("",!0),t("form",{onSubmit:l[2]||(l[2]=P(u=>V(),["prevent"]))},[p(t("mdui-text-field",{label:e.$t("account.login.usernameEmail.title"),required:"","onUpdate:modelValue":l[0]||(l[0]=u=>v(o)?o.value=u:o=u)},[t("span",j,n(r(a).username),1)],8,M),[[f,r(o)]]),p(t("mdui-text-field",{label:e.$t("account.login.password.title"),type:"password","toggle-password":"",required:"","onUpdate:modelValue":l[1]||(l[1]=u=>v(i)?i.value=u:i=u)},[t("span",z,n(r(a).password),1)],8,x),[[f,r(i)]]),t("mdui-button",H,n(e.$t("account.operation.login")),1)],32),t("div",null,[c(n(e.$t("account.login.tips.noAccount")),1),w(r(h),{to:"/register"},{default:_(()=>[c(n(e.$t("account.operation.register")),1)]),_:1})]),t("div",null,[c(n(e.$t("account.login.tips.forgotPassword")),1),w(r(h),{to:"/preresetpassword"},{default:_(()=>[c(n(e.$t("account.operation.resetPassword")),1)]),_:1})])]))}}),J=T(K,[["__scopeId","data-v-43652728"]]);export{J as default};
