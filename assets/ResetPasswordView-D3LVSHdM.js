import{d as k,aC as d,P as x,C as l,c as p,a as r,e as R,u,t as V,al as m,am as f,an as v,at as _,m as g,o as w,aB as B,az as C,_ as N}from"./index-Bnuaqtwk.js";import{A as P}from"./index-DoiNv535.js";const T={class:"content"},U={key:0,class:"error-info"},A=k({__name:"ResetPasswordView",setup(S){const n=x(),y=g();var b=d+(d.endsWith("/")?"":"/")+"1.1/resetPassword/"+n.query.token,a=l(""),s=l(""),t=l("");function c(){if(a.value="",n.query.token){if(!s.value||!t.value){a.value="请填写密码。";return}if(s.value!==t.value){a.value="两次输入的密码不一致。";return}var i=new P;i.get(b,{params:{password:s.value}}).then(e=>{e.data&&JSON.parse(e.data).error?a.value="Token 无效或已过期。":(B(),C("重置密码成功。"),y.push({name:"Home"}))}).catch(e=>{a.value="连接服务器时失败。"})}else a.value="缺少 Token。"}return(i,e)=>(w(),p("div",T,[e[4]||(e[4]=r("h1",null,"重置密码",-1)),u(a)?(w(),p("p",U,V(u(a)),1)):R("",!0),r("form",{onSubmit:e[2]||(e[2]=_(o=>c(),["prevent"]))},[m(r("mdui-text-field",{type:"password",label:"密码","onUpdate:modelValue":e[0]||(e[0]=o=>v(s)?s.value=o:s=o)},null,512),[[f,u(s)]]),m(r("mdui-text-field",{type:"password",label:"确认密码","onUpdate:modelValue":e[1]||(e[1]=o=>v(t)?t.value=o:t=o)},null,512),[[f,u(t)]]),e[3]||(e[3]=r("mdui-button",{type:"submit"},"重置密码",-1))],32)]))}}),I=N(A,[["__scopeId","data-v-19b5c893"]]);export{I as default};
