import{d as k,C as d,ai as C,c as f,a as t,e as R,u as l,t as m,al as p,am as v,an as g,av as U,b as n,f as w,w as x,R as V,m as q,o as _,ax as B,ao as E,aq as I,ay as L,ap as T,K as b,az as D,_ as F}from"./index-CuP_hlbb.js";const M={class:"content"},S={key:0,class:"error-info"},c={slot:"helper",class:"error-info"},j={slot:"helper",class:"error-info"},z=k({__name:"LoginView",setup(A){var y=q(),o=d(""),r=d(""),u={general:"",username:"",password:""},s=d(u);function N(){s.value={...u},o.value?!B(o.value)&&!E(o.value)&&(s.value.username="不是有效的用户名或邮箱。用户名的长度应在 5 到 16 个字符之间，且只能包含字母、数字和下划线，其中第一个字符必须是字母。"):s.value.username="用户名（邮箱）不能为空。",r.value?I(r.value)||(s.value.password="密码格式不正确。密码的长度应至少为 8 个字符，且不为空白字符。"):s.value.password="密码不能为空。",!Object.values(s.value).some(a=>a)&&L(o.value,r.value).then(a=>{a&&(a.code?a.code==205?s.value.username="找不到邮箱对应的用户。":a.code==210?s.value.password="用户名和密码不匹配。":a.code==211?s.value.username="找不到用户。":s.value.general=`登录失败。错误码： ${a.code}。错误信息： ${a.message}。如必要，请联系管理员以获取帮助。`:(T("登录成功！"),b().get("email")&&!b().get("emailVerified")&&D("尚未验证邮箱。验证邮箱以获得更安全的账号体验。转到“账号设置”以验证。"),y.push({name:"Home"})))})}return C([o,r],()=>{s.value={...u}},{immediate:!0}),(a,e)=>(_(),f("div",M,[e[8]||(e[8]=t("h1",null,"登录",-1)),l(s).general?(_(),f("p",S,m(l(s).general),1)):R("",!0),t("form",{onSubmit:e[2]||(e[2]=U(i=>N(),["prevent"]))},[p(t("mdui-text-field",{label:"用户名（邮箱）",required:"","onUpdate:modelValue":e[0]||(e[0]=i=>g(o)?o.value=i:o=i)},[t("span",c,m(l(s).username),1)],512),[[v,l(o)]]),p(t("mdui-text-field",{label:"密码",type:"password","toggle-password":"",required:"","onUpdate:modelValue":e[1]||(e[1]=i=>g(r)?r.value=i:r=i)},[t("span",j,m(l(s).password),1)],512),[[v,l(r)]]),e[3]||(e[3]=t("mdui-button",{type:"submit"},"登录",-1))],32),t("div",null,[e[5]||(e[5]=n("还没有账号？")),w(l(V),{to:"/register"},{default:x(()=>e[4]||(e[4]=[n("注册")])),_:1,__:[4]})]),t("div",null,[e[7]||(e[7]=n("忘记密码？")),w(l(V),{to:"/resetpassword"},{default:x(()=>e[6]||(e[6]=[n("重置密码")])),_:1,__:[6]})])]))}}),K=F(z,[["__scopeId","data-v-1789070b"]]);export{K as default};
