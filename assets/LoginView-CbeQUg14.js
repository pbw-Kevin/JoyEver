import{d as k,C as d,ai as C,c as f,a as t,e as R,u as l,t as m,al as p,am as v,an as g,av as U,b as n,f as w,w as x,R as V,m as c,o as _,ax as q,ao as A,aq as B,ay as E,ap as I,K as b,az as L,aA as T,_ as D}from"./index-D2whVdz8.js";const F={class:"content"},M={key:0,class:"error-info"},S={slot:"helper",class:"error-info"},j={slot:"helper",class:"error-info"},z=k({__name:"LoginView",setup(H){var y=c(),o=d(""),r=d(""),u={general:"",username:"",password:""},a=d(u);function N(){a.value={...u},o.value?!q(o.value)&&!A(o.value)&&(a.value.username="不是有效的用户名或邮箱。用户名的长度应在 5 到 16 个字符之间，且只能包含字母、数字和下划线，其中第一个字符必须是字母。"):a.value.username="用户名（邮箱）不能为空。",r.value?B(r.value)||(a.value.password="密码格式不正确。密码的长度应至少为 8 个字符，且不为空白字符。"):a.value.password="密码不能为空。",!Object.values(a.value).some(s=>s)&&E(o.value,r.value).then(s=>{s&&(s.code?s.code==205?a.value.username="找不到邮箱对应的用户。":s.code==210?a.value.password="用户名和密码不匹配。":s.code==211?a.value.username="找不到用户。":a.value.general=`登录失败。错误码： ${s.code}。错误信息： ${s.message}。如必要，请联系管理员以获取帮助。`:(I("登录成功！"),b().get("email")&&!b().get("emailVerified")&&T("尚未验证邮箱。验证邮箱以获得更安全的账号体验。转到“账号设置”以验证。"),L(!0),y.push({name:"Home"})))})}return C([o,r],()=>{a.value={...u}},{immediate:!0}),(s,e)=>(_(),f("div",F,[e[8]||(e[8]=t("h1",null,"登录",-1)),l(a).general?(_(),f("p",M,m(l(a).general),1)):R("",!0),t("form",{onSubmit:e[2]||(e[2]=U(i=>N(),["prevent"]))},[p(t("mdui-text-field",{label:"用户名（邮箱）",required:"","onUpdate:modelValue":e[0]||(e[0]=i=>g(o)?o.value=i:o=i)},[t("span",S,m(l(a).username),1)],512),[[v,l(o)]]),p(t("mdui-text-field",{label:"密码",type:"password","toggle-password":"",required:"","onUpdate:modelValue":e[1]||(e[1]=i=>g(r)?r.value=i:r=i)},[t("span",j,m(l(a).password),1)],512),[[v,l(r)]]),e[3]||(e[3]=t("mdui-button",{type:"submit"},"登录",-1))],32),t("div",null,[e[5]||(e[5]=n("还没有账号？")),w(l(V),{to:"/register"},{default:x(()=>e[4]||(e[4]=[n("注册")])),_:1,__:[4]})]),t("div",null,[e[7]||(e[7]=n("忘记密码？")),w(l(V),{to:"/resetpassword"},{default:x(()=>e[6]||(e[6]=[n("重置密码")])),_:1,__:[6]})])]))}}),O=D(z,[["__scopeId","data-v-fdee90a0"]]);export{O as default};
