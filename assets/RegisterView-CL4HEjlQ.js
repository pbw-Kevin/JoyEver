import{d as N,C as d,ah as R,c as w,a as l,e as U,u as o,t as m,al as p,am as v,an as f,at as A,b as x,f as k,w as C,R as q,m as B,o as V,av as E,ao as b,ap as I,az as S,S as T,K as _,ay as h,_ as j}from"./index-BPWRIt0J.js";const D={class:"content"},F={key:0,class:"error-info"},M={slot:"helper",class:"error-info"},O={slot:"helper",class:"error-info"},z={slot:"helper",class:"error-info"},H={slot:"helper",class:"error-info"},K=N({__name:"RegisterView",setup(L){var y=B(),t=d(""),i=d(""),n=d(""),u=d(""),g={general:"",username:"",password:"",passwordAgain:"",email:""},e=d(g);function c(){e.value={...g},t.value?E(t.value)?b(t.value)&&(e.value.username="用户名格式不正确。用户名不应具有邮箱的格式。"):e.value.username="用户名格式不正确。用户名的长度应在 5 到 16 个字符之间，且只能包含字母、数字和下划线，其中第一个字符必须是字母。":e.value.username="用户名不能为空。",i.value?I(i.value)||(e.value.password="密码格式不正确。密码的长度应至少为 8个字符，且不为空白字符。"):e.value.password="密码不能为空。",i.value!==n.value&&(e.value.passwordAgain="两次输入的密码不一致。"),u.value&&!b(u.value)&&(e.value.email="邮箱格式不正确。"),!Object.values(e.value).some(r=>r)&&S(t.value,i.value,n.value,u.value).then(r=>{r&&(r.code==0?(T("注册成功！"),_().get("email")&&!_().get("emailVerified")&&h("尚未验证邮箱。验证邮箱以获得更安全的账号体验。转到“账号设置”以验证。"),y.push({name:"Home"})):r.code==202?e.value.username="用户名已被注册。":r.code==203?e.value.email="邮箱已被注册。":r.code==15?e.value.general="注册完成，但是在创建账号相关的必要 Objects 时发生错误。现在可以正常登录并使用，但可能会有潜在的一些功能性问题。如必要，请联系管理员以获取帮助。":e.value.general=`注册失败，错误代码：${r.code}。错误信息： ${r.message}。如必要，请联系管理员以获取帮助。`)})}return R([t,i,n,u],()=>{e.value={...g}},{immediate:!0}),(r,a)=>(V(),w("div",D,[a[8]||(a[8]=l("h1",null,"注册新用户",-1)),o(e).general?(V(),w("p",F,m(o(e).general),1)):U("",!0),l("form",{onSubmit:a[4]||(a[4]=A(s=>c(),["prevent"]))},[p(l("mdui-text-field",{label:"用户名",maxlength:"16",required:"","onUpdate:modelValue":a[0]||(a[0]=s=>f(t)?t.value=s:t=s)},[l("span",M,m(o(e).username),1)],512),[[v,o(t)]]),p(l("mdui-text-field",{type:"password","toggle-password":"",label:"密码",required:"","onUpdate:modelValue":a[1]||(a[1]=s=>f(i)?i.value=s:i=s)},[l("span",O,m(o(e).password),1)],512),[[v,o(i)]]),p(l("mdui-text-field",{type:"password","toggle-password":"",label:"确认密码",required:"","onUpdate:modelValue":a[2]||(a[2]=s=>f(n)?n.value=s:n=s)},[l("span",z,m(o(e).passwordAgain),1)],512),[[v,o(n)]]),p(l("mdui-text-field",{type:"email",label:"邮箱（可选）","onUpdate:modelValue":a[3]||(a[3]=s=>f(u)?u.value=s:u=s)},[l("span",H,m(o(e).email),1)],512),[[v,o(u)]]),a[5]||(a[5]=l("mdui-button",{type:"submit"},"注册",-1))],32),l("div",null,[a[7]||(a[7]=x("已有账号？")),k(o(q),{to:"/login"},{default:C(()=>a[6]||(a[6]=[x("登录")])),_:1,__:[6]})])]))}}),G=j(K,[["__scopeId","data-v-9fa7a690"]]);export{G as default};
